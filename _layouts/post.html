---
layout: default 
---

<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <p class="post-meta">
      작성일: {{ page.date | date: "%Y년 %m월 %d일" }}
      {% if page.categories.size > 0 %}
        • 카테고리: {{ page.categories | join: ', ' }}
      {% endif %}
    </p>
  </header>

  <div class="post-content">
    {{ content }}
  </div>

  <!-- ====================================================== -->
  <!-- 카테고리 기반 이전/다음 글 내비게이션 (새로운 코드) -->
  <!-- ====================================================== -->
  {% comment %}
    1. 현재 포스트의 첫 번째 카테고리를 가져옵니다.
    2. 해당 카테고리에 속한 모든 포스트 목록을 가져옵니다.
    3. 목록을 반복하며 현재 포스트를 찾습니다.
    4. 찾았을 때, forloop의 내장 변수인 'next'와 'previous'를 사용해
       각각 다음 글과 이전 글 객체를 변수에 저장합니다.
  {% endcomment %}

  {% assign category_name = page.categories | first %}
  {% if category_name %}
    {% assign posts_in_category = site.categories[category_name] %}
    {% for post in posts_in_category %}
      {% if post.url == page.url %}
        {% assign prev_post_in_category = forloop.previous %}
        {% assign next_post_in_category = forloop.next %}
      {% endif %}
    {% endfor %}
  {% endif %}

  <nav class="post-nav">
    <!-- 카테고리 내 이전 글이 존재할 경우에만 링크를 보여줍니다. -->
    {% if prev_post_in_category %}
      <a class="prev" href="{{ prev_post_in_category.url | relative_url }}">« 이전 글: {{ prev_post_in_category.title }}</a>
    {% endif %}

    <!-- 카테고리 내 다음 글이 존재할 경우에만 링크를 보여줍니다. -->
    {% if next_post_in_category %}
      <a class="next" href="{{ next_post_in_category.url | relative_url }}">다음 글: {{ next_post_in_category.title }} »</a>
    {% endif %}
  </nav>

</article>
