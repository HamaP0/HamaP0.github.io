---
layout: default
---
<article class="post">
    <header class="post-header">
        <h1 class="post-title">{{ page.title | escape }}</h1>
        <p class="post-meta">
            작성일: {{ page.date | date: "%Y년 %m월 %d일" }}
            {% if page.categories.size > 0 %}
                • 카테고리: {{ page.categories | join: ', ' }}
            {% endif %}
        </p>
    </header>

    <div class="post-content">
        {{ content }}
    </div>

    {% comment %}
    ======================================================
    카테고리 내 이전/다음 글 내비게이션 (안정성 강화 버전)
    - 카테고리 이름을 소문자로 변환하여 일관성 있게 처리합니다.
    - 이로 인해 'NGFW' vs 'ngfw' 같은 대소문자 문제를 방지합니다.
    ======================================================
    {% endcomment %}
    {%- comment -%} 현재 글의 첫 번째 카테고리를 가져와 '소문자'로 변환합니다. {%- endcomment -%}
    {%- assign current_category_raw = page.categories.first -%}
    {%- assign current_category_safe = current_category_raw | downcase -%}

    {%- comment -%} 카테고리가 존재할 경우에만 아래 로직을 실행합니다. {%- endcomment -%}
    {%- if current_category_safe -%}
        {%- comment -%} Jekyll의 카테고리 목록(site.categories)에 접근할 때도 소문자로 접근합니다. {%- endcomment -%}
        {%- assign posts_in_category_unsorted = site.categories[current_category_safe] -%}
        
        {%- if posts_in_category_unsorted -%}
            {%- assign posts_in_category = posts_in_category_unsorted | sort: 'date' -%}

            {%- for post in posts_in_category -%}
                {%- if post.url == page.url -%}
                    {%- assign post_index = forloop.index0 -%}
                    {%- break -%}
                {%- endif -%}
            {%- endfor -%}

            {%- assign previous_post = posts_in_category[post_index | minus: 1] -%}
            {%- assign next_post = posts_in_category[post_index | plus: 1] -%}

            {%- if previous_post or next_post -%}
                <hr>
                <nav class="post-nav">
                    {%- if previous_post -%}
                    <a class="post-nav-item post-nav-prev" href="{{ previous_post.url | relative_url }}">
                        <div class="nav-arrow">« 이전 글</div>
                        <span class="post-title">{{ previous_post.title | escape }}</span>
                    </a>
                    {%- endif -%}

                    {%- if next_post -%}
                    <a class="post-nav-item post-nav-next" href="{{ next_post.url | relative_url }}">
                        <div class="nav-arrow">다음 글 »</div>
                        <span class="post-title">{{ next_post.title | escape }}</span>
                    </a>
                    {%- endif -%}
                </nav>
            {%- endif -%}
        {%- endif -%}
    {%- endif -%}

</article>
