---
layout: default
---
<article class="post">
    <header class="post-header">
        <h1 class="post-title">{{ page.title | escape }}</h1>
        <p class="post-meta">
            작성일: {{ page.date | date: "%Y년 %m월 %d일" }}
            {% if page.categories.size > 0 %}
                • 카테고리: {{ page.categories | join: ', ' }}
            {% endif %}
        </p>
    </header>

    <div class="post-content">
        {{ content }}
    </div>

    {%- comment -%}
    ======================================================
    카테고리 내 이전/다음 글 내비게이션
    ======================================================
    {%- endcomment -%}
    {%- assign current_category = page.categories.first -%}

    {%- if current_category -%}
        {%- assign posts_in_category = site.categories[current_category] | sort: 'date' -%}
        
        {%- for post in posts_in_category -%}
            {%- if post.url == page.url -%}
                {%- assign post_index = forloop.index0 -%}
                {%- break -%}
            {%- endif -%}
        {%- endfor -%}

        {%- comment -%}
        수정된 부분: 인덱스 연산을 먼저 수행하고,
        해당 인덱스가 유효한 경우에만 이전/다음 글로 할당합니다.
        {%- endcomment -%}
        {%- assign prev_post_index = post_index | minus: 1 -%}
        {%- assign next_post_index = post_index | plus: 1 -%}

        {%- if prev_post_index >= 0 -%}
            {%- assign previous_post = posts_in_category[prev_post_index] -%}
        {%- endif -%}

        {%- if next_post_index < posts_in_category.size -%}
            {%- assign next_post = posts_in_category[next_post_index] -%}
        {%- endif -%}

        {%- if previous_post or next_post -%}
            <hr>
            <nav class="post-nav">
                {%- if previous_post -%}
                <a class="post-nav-item post-nav-prev" href="{{ previous_post.url | relative_url }}">
                    <div class="nav-arrow">« 이전 글</div>
                    <span class="post-title">{{ previous_post.title | escape }}</span>
                </a>
                {%- endif -%}

                {%- if next_post -%}
                <a class="post-nav-item post-nav-next" href="{{ next_post.url | relative_url }}">
                    <div class="nav-arrow">다음 글 »</div>
                    <span class="post-title">{{ next_post.title | escape }}</span>
                </a>
                {%- endif -%}
            </nav>
        {%- endif -%}
    {%- endif -%}

</article>
