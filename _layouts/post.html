<!DOCTYPE html>
<html lang="ko" data-theme="dark">
  {% include head.html %}
<body>

  {% include header.html %}

  <main class="content-wrapper">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">{{ page.title }}</h1>
        <p class="post-meta">
          작성일: {{ page.date | date: "%Y년 %m월 %d일" }}
          {% if page.categories.size > 0 %}
            • 카테고리: {{ page.categories | join: ', ' }}
          {% endif %}
        </p>
      </header>

      <div class="post-content">
        {{ content }}
      </div>

      {% assign current_category = page.categories.first %}
      {% if current_category %}
        {% assign posts_in_category = site.categories[current_category] | sort: 'date' %}
        {% for p in posts_in_category %}
          {% if p.url == page.url %}
            {% assign idx = forloop.index0 %}
          {% endif %}
        {% endfor %}
        {% assign prev_idx = idx | minus: 1 %}
        {% assign next_idx = idx | plus: 1 %}
        {% if prev_idx >= 0 or next_idx < posts_in_category.size %}
          <hr>
          <nav class="post-nav">
            {% if prev_idx >= 0 %}
              {% assign prev_post = posts_in_category[prev_idx] %}
              <a class="post-nav-item post-nav-prev" href="{{ prev_post.url | relative_url }}">
                <div class="nav-arrow">« 이전 글</div>
                <span class="post-title">{{ prev_post.title }}</span>
              </a>
            {% else %}
              <div class="post-nav-item-placeholder"></div>
            {% endif %}
            {% if next_idx < posts_in_category.size %}
              {% assign next_post = posts_in_category[next_idx] %}
              <a class="post-nav-item post-nav-next" href="{{ next_post.url | relative_url }}">
                <div class="nav-arrow">다음 글 »</div>
                <span class="post-title">{{ next_post.title }}</span>
              </a>
            {% else %}
              <div class="post-nav-item-placeholder"></div>
            {% endif %}
          </nav>
        {% endif %}
      {% endif %}
    </article>
  </main>

  {% include footer.html %}
  {% include back-to-top.html %}

</body>
</html>