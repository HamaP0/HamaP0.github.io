---
layout: post
title: "JWT 공부"
date: 2025-09-17 17:00:00 +0900
categories: [웹 기술]
---

### 1. 개요

JWT는 인증 정보를 포함한 데이터를 URL에 안전하게 전송하기 위한 간결하고 독립적인 방법을 정의한 개방형 표준(RFC 7519)이다.

최신 API 환경에서 사용자의 인증 상태를 관리하는 표준 방식으로, 서버는 사용자의 로그인 성공 시 JWT를 발급하고 클라이언트는 이후 모든 요청에 이 토큰을 포함하여 자신을 증명한다.

---

### 2. JWT 구조
   ![JWT](/assets/images/JWT_1.png)
JWT는 마침표(`.`)로 구분되는 세 부분으로 구성되며 각 부분은 Base64Url로 인코딩되어 있다.

`xxxxx.yyyyy.zzzzz` (Header.Payload.Signature)

#### **1. 헤더 (Header)**
*   토큰의 유형(typ)과 사용된 서명 알고리즘(alg)을 지정한다.
*   **예시:** `{"alg": "HS256", "typ": "JWT"}`

#### **2. 페이로드 (Payload)**
*   토큰에 담을 실제 정보(Claim)를 포함한다. 사용자의 ID · 역할 · 만료 시간 등이 여기에 해당한다.
*   페이로드는 누구나 디코딩하여 볼 수 있으므로 비밀번호와 같은 민감 정보는 절대 포함해서는 안 된다.
*   **예시:** `{"sub": "12345", "name": "John Doe", "iat": 1516239022}`

#### **3. 서명 (Signature)**
*   토큰의 무결성을 보장하는 가장 중요한 부분이다.
*   인코딩된 헤더와 페이로드를 합친 후, 서버만 알고 있는 **비밀 키(Secret Key)**를 이용해 헤더에 명시된 알고리즘(예: HMAC SHA256)으로 암호화하여 생성한다.
*   서버는 요청을 받을 때마다 이 서명을 다시 계산하여 토큰이 중간에 위변조되지 않았는지 검증한다.

---

### 3. 보안 관점에서의 의미

*   **서명 알고리즘 없음 (alg: none):**
    공격자가 헤더의 `alg` 필드를 `none`으로 변경하고 서명 부분을 비워서 보내면 일부 라이브러리는 이를 유효한 토큰으로 잘못 인식할 수 있다. 서버는 반드시 `alg: none`을 거부해야 한다.

*   **약한 비밀 키 (Weak Secret Key):**
    서명이 HMAC 알고리즘으로 생성된 경우 서버의 비밀 키가 `password`, `secret`처럼 추측하기 쉽다면 공격자는 무차별 대입 공격으로 비밀 키를 알아내어 임의의 토큰을 생성(위조)할 수 있다.

*   **민감 정보 노출:**
    페이로드는 암호화된 것이 아니라 단순히 Base64로 인코딩된 것이므로 누구나 내용을 확인할 수 있다. 사용자 권한, 개인정보 등 민감한 데이터를 페이로드에 포함해서는 안 된다.

<hr class="short-rule">
