---
layout: post
title: "A05:2021 - Security Misconfiguration (보안 설정 오류) 분석 보고서"
date: 2025-08-29 17:00:00 +0900
categories: [OWASP Top 10]
---
---

### ***프로젝트 5. A05:2021 - Security Misconfiguration (보안 설정 오류) 분석 보고서***

### 1. 취약점 개요

   보안 설정 오류는 '최첨단 보안 시스템을 갖춘 건물의 현관 비밀번호를 공장 초기값인 '0000'으로 방치하는 것'과 같습니다. 애플리케이션 코드가 아무리 견고하더라도 서버와 프레임워크의 기본 설정을 그대로 사용하면 공격자는 알려진 지름길을 통해 너무나 쉽게 내부로 침투할 수 있습니다. 이는 불필요한 정보 노출을 시작으로 시스템의 중요 설정이 외부에 공개되어 연쇄적인 공격의 빌미를 제공하는 근본적인 원인이 됩니다.

   본 보고서는 공격자의 시점에서 Nmap, Nikto와 같은 정찰 도구를 활용하여 서버의 설정 오류들을 단계적으로 식별하고 이를 통해 어떻게 유의미한 내부 정보를 수집하는지 그 과정을 추적합니다.

---

### 2. 시나리오 분석 및 재현

#### Part 1. [외부 정찰] 포트 스캔으로 서비스 버전 정보 수집

*   ***공격 시나리오:***
   공격의 첫 단계는 목표 시스템의 외부를 스캔하여 어떤 문(포트)이 열려있고 어떤 서비스가 동작하는지 파악하는 것이다. 만약 서비스의 상세한 버전 정보까지 노출된다면 이는 다음 공격 계획을 수립하는 데 결정적인 단서가 될 것이다.

*   ***공격 검증:***
   칼리 리눅스에서 `nmap`으로 타겟 서버를 스캔한 결과 웹 서비스(80/tcp) 외에 원격 접속(22/tcp) 포트가 열려있음을 확인했습니다. 더 중요한 것은 `Apache 2.4.58`, `OpenSSH 9.6p1` 등 서비스의 정확한 버전 정보가 노출되고 있었습니다. 웹 스캐너 `nikto` 또한 동일한 서버 버전 정보를 명확히 보여주었습니다.

   ![nmap](/assets/images/A05_P1-1.png)
   ![nikto](/assets/images/A05_P1-2.png)

*   ***위험성 분석:***
   공격자는 이 버전 정보를 이용해 해당 버전에 알려진 취약점(CVE)을 즉시 검색해 볼 수 있습니다. 이는 복잡한 해킹 기술 없이도 공개된 공격 코드로 손쉽게 시스템을 장악할 수 있는 지름길을 제공하는 것과 같습니다.

>  Nmap을 통해 알아낸 버전 정보는 공격의 방향을 정해주는 나침반과 같습니다. 이제 더 깊숙한 정보를 찾기 위해 개발자가 실수로 남겨둔 흔적을 찾아보았습니다.

#### Part 2. [내부 정찰] 디버깅 페이지`phpinfo` 노출로 서버 내부 설정 파악

*   ***공격 시나리오:***
   만약 개발 과정에서 테스트 목적으로 사용된 `phpinfo.php`와 같은 디버깅 페이지가 운영 서버에 그대로 남아있다면 공격자는 이 페이지를 통해 서버의 상세한 내부 설정과 구조를 파악할 수 있을 것이다.

*   ***공격 검증:***
   브라우저 주소창에 `/DVWA/phpinfo.php` 라는 주소를 직접 입력하자 PHP 버전 · 설치된 모듈 · 서버의 주요 파일 경로 등 시스템의 거의 모든 설정 정보가 담긴 페이지가 그대로 노출되었습니다.

   ![phpinfo](/assets/images/A05_P2-1.png)

*   ***위험성 분석:***
   이 페이지는 서버의 내부 설계도를 공격자에게 통째로 넘겨주는 것과 같습니다. 공격자는 이 정보를 활용하여 파일 업로드 취약점의 정확한 경로를 파악하는 등 다른 공격의 성공률을 비약적으로 높일 수 있습니다.

>  서버의 상세한 설정 정보를 파악한 다음 단계는 실제 사용자가 접근하는 폴더 중 잠기지 않은 곳이 있는지 확인하는 것입니다.

#### Part 3. [파일 시스템 접근] 디렉토리 리스팅으로 의도치 않은 파일 노출

*   ***공격 시나리오:***
   웹 서버의 특정 폴더에 `index` 파일이 없을 때 그 안의 파일 목록 전체가 노출되도록 설정(디렉토리 리스팅)되어 있다면 공격자는 숨겨진 설정 파일이나 백업 파일을 손쉽게 발견하고 다운로드할 수 있을 것이다.

*   ***공격 검증:***
   파일이 업로드되는 폴더인 `/DVWA/hackable/uploads/`에 파일 이름 없이 직접 접속하자 `Index of ...` 라는 제목과 함께 해당 폴더 안의 모든 파일 목록이 그대로 노출되었습니다. 이는 '디렉토리 리스팅' 기능이 활성화되어 있기 때문입니다.

   ![list](/assets/images/A05_P4-1.png)

*   ***위험성 분석:***
   만약 이 폴더에 개발자가 실수로 남겨둔 백업 파일 `db_backup.zip` 이나 이전 버전의 설정 파일 `config.old` 이 있었다면 공격자는 그 파일을 바로 다운로드하여 데이터베이스 접속 정보와 같은 치명적인 정보를 획득할 수 있었을 것입니다.

---

### 3. 원인 및 해결 방안

*   ***원인: 기본값의 함정 Default is Insecure***

   이번에 발견된 모든 문제의 공통적인 원인은 바로 `기본Default 설정`을 그대로 사용했기 때문입니다. 대부분의 서버 프로그램은 설치 편의성을 위해 처음에는 많은 기능이 켜져 있고 정보를 친절하게 보여주도록 설정되어 있습니다. 하지만 이런 기본 설정은 보안에는 매우 취약합니다.

*   ***해결 방안: 시스템 강화 `System Hardening`***

   이런 문제를 막기 위해서는 시스템 강화 `Hardening` 작업을 반드시 수행해야 합니다. 이는 시스템을 단단하게 만든다는 뜻으로 공격당할 만한 부분을 미리 제거하는 모든 과정을 의미합니다.
   
   1.  **정보 노출 최소화:** 서버 설정 파일`httpd.conf`을 수정하여 서버 버전 · PHP 버전 · 서버 서명 같은 정보가 외부에 보이지 않도록 설정해야 합니다. `ServerTokens Prod`, `expose_php = Off`
   2.  **불필요한 기능 비활성화:** 디렉토리 리스팅처럼 공격에 악용될 수 있는 기능은 반드시 꺼야 합니다. `Options -Indexes`
   3.  **최소 권한의 원칙:** 웹 서버를 포함한 모든 서비스는 꼭 필요한 권한만 가지고 꼭 필요한 포트만 열어두어야 합니다.
   4.  **주기적인 점검:** 이런 설정들이 제대로 되어 있는지 정기적으로 점검하고 보안 패치가 나오면 즉시 업데이트하는 것이 중요합니다.

<hr class="short-rule">