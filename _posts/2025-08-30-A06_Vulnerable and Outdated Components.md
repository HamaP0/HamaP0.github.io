---
layout: post
title: "A06:2021 - Vulnerable and Outdated Components <br> (취약하고 오래된 구성 요소) 분석 보고서"
date: 2025-08-30 17:00:00 +0900
categories: Projects OWASP-Top-10
---
---

### **프로젝트 6. A06:2021 - Vulnerable and Outdated Components <br> (취약하고 오래된 구성 요소) 분석 보고서**

#### **1. 취약점 개요**

우리가 만드는 프로그램이나 웹사이트는 보통 직접 만든 코드와 외부에서 가져온 '부품(구성 요소)'들을 조립해서 완성됩니다. 이때 사용하는 부품, 예를 들어 웹 서버 프로그램(Apache), 각종 기능 라이브러리, 프레임워크 등에 이미 알려진 보안 구멍이 있다면 어떻게 될까요? 내가 만든 코드가 아무리 튼튼해도, 공격자는 바로 그 '금이 간 부품' 하나를 공략해서 시스템 전체를 무너뜨릴 수 있습니다.

'취약하고 오래된 구성 요소'는 바로 이처럼 내가 사용하는 부품들의 보안 상태를 제대로 관리하지 않았을 때 발생하는 모든 위험을 말합니다. 이번 분석에서는 DVWA가 실행되는 서버 환경을 중심으로, 오래된 부품을 찾아내고 그 위험성을 분석한 뒤, 어떻게 하면 이런 위험을 체계적으로 관리할 수 있을지 그 방법을 고민해 보았습니다.

---

#### **2. 시나리오 분석 및 재현**

**Part 1. 숨겨진 정보 파헤치기: 서버 구성 요소 버전 식별**

*   **가설 설정:**
공격자는 본격적인 공격에 앞서, 목표 시스템이 어떤 부품들로 만들어져 있는지 최대한 자세히 파악하려 할 것이다. 만약 서버가 자신의 버전 정보를 쉽게 노출한다면, 이는 공격의 첫 번째 실마리가 될 것이다.

*   **공격 검증:**
`nmap` 도구를 이용해 서버의 열려있는 문(포트)과 그곳에서 동작하는 프로그램의 버전을 스캔했습니다. 그 결과, 이 서버가 웹 서버로 **`Apache httpd 2.4.58`** 버전을 사용하고 있다는 구체적인 정보를 알아낼 수 있었습니다. 이 버전 정보는 우리가 앞으로 분석할 가장 중요한 단서입니다.

![Apache version](/assets/images/A06_P1-1.png)

**Part 2. 정보에서 무기로: CVE를 이용한 공격 시나리오 구성**

*   **가설 설정:**
알아낸 버전 정보(`Apache 2.4.58`)를 가지고 인터넷에 공개된 취약점 정보(CVE)를 검색하면, 해당 버전에만 적용되는 구체적인 공격 방법을 찾아낼 수 있을 것이다.

*   **공격 검증:**
인터넷에서 `Apache 2.4.58 vulnerability` 라고 검색한 결과, 이 버전에 영향을 미치는 여러 보안 취약점들이 보고된 것을 확인했습니다. 그중에서도 **`CVE-2024-43394`**와 **`CVE-2024-43204`**는 SSRF(Server-Side Request Forgery) 공격에 악용될 수 있는 위험한 취약점이었습니다.

![SSRF CVE](/assets/images/A06_P2-1.png)

*   **위험성 분석:**
이것은 개발자가 SSRF에 취약한 코드를 단 한 줄도 짜지 않았더라도, 단지 **취약한 버전의 아파치(Apache) 웹 서버를 사용했다는 사실 하나만으로** 서버가 SSRF 공격에 노출될 수 있다는 것을 의미합니다. 공격자는 이 취약점을 이용해 서버가 내부망의 다른 시스템에 대신 접속하도록 조종하여 더 큰 피해를 유발할 수 있습니다.

**Part 3. 자동화된 탐정: 소프트웨어 구성 요소 분석(SCA)의 중요성**

*   **분석:**
요즘 웹사이트 하나에는 수십, 수백 개의 외부 라이브러리가 사용됩니다. 이것들의 버전을 사람이 일일이 눈으로 확인하고 인터넷에 검색하는 것은 사실상 불가능합니다. 그래서 실제 현업에서는 **SCA(Software Composition Analysis, 소프트웨어 구성 요소 분석)**라는 자동화된 도구를 사용합니다.

이런 도구들은 우리가 사용하는 모든 부품의 목록과 버전을 자동으로 뽑아낸 뒤, 알려진 취약점 데이터베이스(CVE)와 비교해서 "당신이 쓰는 부품 중에 이런 위험한 것들이 있습니다!" 라고 알려주는 보고서를 만들어 줍니다. 아래는 `OWASP Dependency-Check`라는 대표적인 SCA 도구의 보고서 예시입니다.

![Dependency-Check](/assets/images/A06_P3-1.png)

최근에는 GitHub 같은 개발 플랫폼에 `Dependabot`과 같은 기능이 내장되어 있어, 위험한 부품을 발견하면 단순히 알려주는 것을 넘어 안전한 최신 버전으로 업데이트하라는 코드 수정 제안까지 자동으로 해줍니다.

![Dependabot](/assets/images/A06_P3-2.png)

*   **분석 결론:**
결국 '취약하고 오래된 구성 요소' 문제는 주기적인 자동화 스캔을 통해 꾸준히 관리하는 것이 유일한 해결책이라는 것을 알 수 있습니다.

---

#### **3. 근본 원인 및 해결 방안**

*   **원인: 관리의 부재**
이 문제의 근본 원인은 "한번 설치하고 잊어버리는 것"입니다. 소프트웨어는 살아있는 생물과 같아서, 시간이 지나면 새로운 벌레(버그)나 약점이 계속해서 발견됩니다. 따라서 한번 설치했다고 해서 영원히 안전한 것이 아니라, 꾸준히 건강 상태를 확인하고 예방 주사(보안 패치)를 놔주는 '관리'가 반드시 필요합니다.

*   **해결 방안: 체계적인 패치 관리 정책 수립**
이 문제를 근본적으로 해결하려면, 아래와 같은 '패치 관리 정책'을 만들고 꾸준히 실행해야 합니다.

1.  **자산 식별:** 먼저 우리 시스템이 어떤 부품(소프트웨어, 라이브러리)들로 이루어져 있는지 정확한 목록(SBOM: Software Bill of Materials)을 만들어야 합니다.
2.  **정기적인 스캔:** 위에서 살펴본 SCA 도구를 개발 과정에 도입하여, 새로운 코드가 만들어질 때마다 사용하는 부품들의 안전성을 자동으로 검사해야 합니다.
3.  **위험도 평가 및 대응:** 새로운 취약점이 발견되면, 그것이 우리 시스템에 얼마나 치명적인지 위험도를 평가하고, 그에 따라 즉시 업데이트를 할지, 아니면 다음 업데이트 때 같이 진행할지 계획을 세워야 합니다.
4.  **신속한 업데이트:** 보안 업데이트는 더 이상 선택이 아닌 필수입니다. 특히 위험도가 높은 취약점에 대한 패치는 최대한 빠르게 적용해야 합니다.

---
