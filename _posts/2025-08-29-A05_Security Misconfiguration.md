---
layout: post
title: "A05:2021 - Security Misconfiguration (보안 설정 오류) 분석 보고서"
date: 2025-08-29 17:00:00 +0900
categories: Projects OWASP-Top-10
---
---

### **프로젝트 5. A05:2021 - Security Misconfiguration (보안 설정 오류) 분석 보고서**

### **1. 취약점 개요**

**`보안 설정 오류`**란 프로그램 설치 후 보안상 필수적인 설정을 간과하거나 잘못 설정하여 발생하는 모든 문제를 의미합니다. 이는 마치 현관문 기본 비밀번호를 변경하지 않거나 사용하지 않는 창문을 잠그지 않고 열어두는 것과 같습니다. 아무리 완벽한 코드를 작성했더라도 서버 보안이 허술하거나 관리자 정보가 노출되면 해커는 이러한 취약점을 틈타 쉽게 침입할 수 있습니다. 

본 분석에서는 DVWA가 설치된 서버 환경 자체의 설정 문제점을 공격자 관점에서 정보 수집을 통해 파악하고, 4가지 보안 설정 오류를 직접 찾아보았습니다.

---

### **2. 시나리오 분석 및 재현**

**Part 1. 열려있는 문과 이름표: 불필요한 정보 노출**

*   **가설 설정:**
공격의 첫 단계는 정보 수집이다. 만약 서버가 자신의 정보를 너무 많이 보여주도록 설정되어 있다면, 공격자는 그 정보를 바탕으로 어떤 공격이 효과적일지 쉽게 계획을 세울 수 있을 것이다.

*   **공격 검증:**
칼리 리눅스에서 `nmap`이라는 도구로 타겟 서버`192.9.200.11`를 스캔해 보았습니다. 그 결과, 웹 서비스를 위한 80번 포트 외에도, 원격 접속에 사용되는 22번 포트가 열려 있는 것을 확인했습니다. 더 큰 문제는, 각 문을 지키는 프로그램들의 이름과 버전`Apache 2.4.58` `OpenSSH 9.6p1`이 그대로 노출되고 있었습니다. `nikto`라는 웹 스캐너로 확인했을 때도 서버가 '저는 우분투에서 실행되는 아파치 2.4.58 서버입니다'라고 친절하게 알려주는 것을 볼 수 있었습니다.

   ![nmap](/assets/images/A05_P1-1.png)
   ![nikto](/assets/images/A05_P1-2.png)

*   **위험성 분석:**
공격자는 이 버전 정보를 가지고 인터넷에서 해당 버전에 알려진 공격 방법`Exploit`이 있는지 바로 검색해 볼 수 있습니다. 굳이 어려운 해킹 기술을 쓰지 않아도, 공개된 공격 코드를 이용해 손쉽게 서버를 공격할 수 있게 되는 것입니다. 이는 공격자에게 지름길을 알려주는 것과 같습니다.

**Part 2. 집안 설계도 공개: 디버깅 페이지 노출**

*   **가설 설정:**
개발자들이 테스트를 위해 사용하는 페이지가 실수로 서버에 남아있다면, 공격자는 이 페이지를 통해 서버의 내부 구조와 설정 정보를 속속들이 파악할 수 있을 것이다.

*   **공격 검증:**
브라우저 주소창에 `.../DVWA/phpinfo.php` 라는 주소를 직접 입력해 보았습니다. 그러자 PHP라는 프로그램의 버전, 설치된 부가 기능, 서버의 주요 파일 경로 등 시스템의 거의 모든 설정 정보가 담긴 페이지가 그대로 나타났습니다.

   ![phpinfo](/assets/images/A05_P2-1.png)

*   **위험성 분석:**
이 페이지는 서버의 내부 설계도를 공격자에게 그대로 노출하는 것과 같은 위험을 안고 있습니다. 공격자는 이 정보를 활용하여 파일 업로드 또는 파일 포함 공격과 같은 시도의 성공 가능성을 크게 높일 수 있습니다. 따라서 개발이 완료된 후에는 이러한 디버깅용 파일을 반드시 제거해야 합니다.

**Part 3. 너무 친절한 자기소개: 상세한 서버 정보 노출**

*   **가설 설정:**
만약 서버가 에러가 났을 때, '죄송합니다. 페이지를 찾을 수 없습니다' 라고만 말하는 게 아니라, 자신의 이름, 버전, 운영체제 같은 정보까지 알려준다면 어떨까? 이 또한 공격자에게는 중요한 단서가 될 것이다.

*   **공격 검증:**
웹 브라우저에서 일부러 존재하지 않는 페이지`.../blahblah.html`에 접속을 시도했습니다. 그러자 나타난 'Not Found' 에러 페이지의 맨 아래쪽에 `Apache/2.4.58 (Ubuntu) Server at 192.9.200.11 Port 80` 이라는 문구가 선명하게 보였습니다. 이것은 서버가 자신의 정보를 외부에 그대로 노출하도록 설정된 **서버 서명Server Signature** 기능이 켜져 있다는 증거입니다.

   ![error](/assets/images/A05_P3-1.png)

*   **위험성 분석:**
Part 1에서 확인한 정보 노출 문제와 같습니다. 공격자는 불필요한 노력 없이 서버의 종류와 버전을 쉽게 파악하고, 이를 바탕으로 공격 계획을 세울 수 있습니다.

**Part 4. 잠기지 않은 자료실: 디렉토리 리스팅 활성화**

*   **가설 설정:**
웹사이트의 특정 폴더에 접속했을 때, 그 안의 파일 목록 전체가 그대로 보인다면, 공격자는 숨겨진 파일이나 중요한 자료를 손쉽게 찾아내 훔쳐갈 수 있을 것이다.

*   **공격 검증:**
파일이 업로드되는 폴더`.../DVWA/hackable/uploads/`에 파일 이름 없이 직접 접속해 보았습니다. 그러자 웹 서버는 친절하게도 `Index of ...` 라는 제목과 함께 그 폴더 안에 있는 모든 파일의 목록을 보여주었습니다. 이것은 '디렉토리 리스팅' 기능이 활성화되어 있기 때문입니다.

   ![list](/assets/images/A05_P4-1.png)

*   **위험성 분석:**
만약 이 폴더에 개발자가 실수로 올려둔 백업 파일`db_backup.zip`이나 임시 파일`config.old` 같은 것이 있었다면, 공격자는 그 파일을 바로 다운로드해서 데이터베이스 접속 정보 같은 민감한 내용을 알아낼 수 있었을 것입니다. 의도치 않은 정보 유출의 직접적인 원인이 되는 설정 오류입니다.

---

### **3. 근본 원인 및 해결 방안**

*   **원인: 기본값의 함정**

이번에 발견된 모든 문제들의 공통적인 원인은 바로 기본Default 설정을 그대로 사용했기 때문입니다. 대부분의 서버 프로그램은 설치의 편의성을 위해 처음에는 많은 기능이 켜져 있고, 정보도 친절하게 보여주도록 설정되어 있습니다. 하지만 이런 기본 설정은 보안에는 매우 취약합니다.

*   **해결 방안: 시스템 경화 Hardening 적용**

이런 문제를 막기 위해서는 **`Hardening`**이라는 작업을 꼭 해야 합니다. 이것은 시스템을 단단하게 만든다는 뜻으로, 공격당할 만한 부분을 미리 없애는 모든 과정을 말합니다.

1.  **정보 노출 최소화:** 서버 설정 파일`httpd.conf` 등 을 수정해서 서버 버전, PHP 버전, 서버 서명 같은 정보가 외부에 보이지 않도록 설정해야 합니다. `ServerTokens Prod`, `expose_php = Off`
2.  **불필요한 기능 끄기:** 디렉토리 리스팅처럼 공격에 악용될 수 있는 기능은 꺼야 합니다. `Options -Indexes`
3.  **최소 권한의 원칙:** 웹 서버를 포함한 모든 서비스는 꼭 필요한 권한만 가지고, 꼭 필요한 포트만 열어두어야 합니다.
4.  **주기적인 점검:** 이런 설정들이 제대로 되어 있는지 정기적으로 점검하고, 보안 패치가 나오면 바로바로 업데이트해주는 것이 중요합니다.


<hr class="short-rule">